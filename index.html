<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø°ÙƒØ±Ù†ÙŠ â€” Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©</title>
  <style>
    :root{
      --orange1:#ff8a00;
      --orange2:#ff5e00;
      --bg:#fff;
      --muted:#666;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Tajawal", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, #fff7f0 0%, #fff 100%);
      color:#222;
      direction:rtl;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      gap:20px;
    }

    .container{
      width:100%;
      max-width:540px;
      background:linear-gradient(135deg,var(--orange1),var(--orange2));
      border-radius:16px;
      padding:18px;
      box-shadow:0 12px 30px rgba(255,110,20,0.15);
    }

    .card{
      background:var(--bg);
      border-radius:12px;
      padding:18px;
      box-shadow:0 6px 18px rgba(0,0,0,0.06);
    }

    h1{margin:0 0 10px;color:#fff;text-align:center;font-size:20px}
    .sub{color:rgba(255,255,255,0.95);text-align:center;margin-bottom:16px}

    label{display:block;text-align:right;font-weight:600;margin-top:10px}
    input[type="text"], input[type="date"], textarea{
      width:100%;
      padding:12px 14px;
      margin-top:8px;
      border-radius:10px;
      border:1px solid #eee;
      font-size:15px;
      resize:vertical;
    }
    textarea{min-height:110px}

    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .btn{
      background:#fff;
      color:var(--orange2);
      border:none;
      padding:12px 14px;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 6px 12px rgba(0,0,0,0.06);
      flex:1;
    }
    .btn:active{transform:translateY(1px)}

    #status{
      margin-top:12px;
      text-align:center;
      font-weight:700;
      color:#fff;
    }

    /* activation modal */
    .overlay{
      position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;padding:20px;z-index:999;
    }
    .modal{
      background:#fff;border-radius:12px;padding:20px;max-width:420px;width:100%;box-shadow:0 8px 30px rgba(0,0,0,0.25);text-align:right;
    }
    .modal h2{margin:0 0 8px;color:var(--orange2)}
    .modal p{margin:0 0 12px;color:var(--muted)}
    .modal input{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;font-size:16px;margin-bottom:10px}
    .modal button{background:var(--orange2);color:#fff;border:none;padding:10px 12px;border-radius:8px;font-weight:700;cursor:pointer;width:100%}

    @media (max-width:520px){
      body{padding:12px}
      .container{padding:14px}
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>ğŸ“¤ Ø°ÙƒØ±Ù†ÙŠ â€” Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…</h1>
    <p class="sub">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ø«Ù… Ø§Ø¶ØºØ· "Ø¥Ø±Ø³Ø§Ù„". (ÙŠØ³ØªÙ„Ø²Ù… Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„)</p>

    <div class="card">
      <label for="subject">Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©</label>
      <input id="subject" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª">

      <label for="task">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©</label>
      <textarea id="task" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ÙˆØ§Ø¬Ø¨ Ø£Ùˆ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea>

      <label for="date">Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
      <input id="date" type="date">

      <div class="row">
        <button id="sendBtn" class="btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
      </div>

      <div id="status"></div>
    </div>
  </div>

  <!-- Activation modal -->
  <div id="activationOverlay" class="overlay" style="display:none">
    <div class="modal" role="dialog" aria-modal="true">
      <h2>Ø±Ù…Ø² Ø§Ù„ØªÙØ¹ÙŠÙ„</h2>
      <p>ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªÙØ¹ÙŠÙ„ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©.</p>
      <input id="activationInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ù‡Ù†Ø§">
      <button id="activationBtn">Ø¯Ø®ÙˆÙ„</button>
      <p style="margin-top:8px;color:#999;font-size:13px">Ø±Ù…Ø² Ø§Ù„ØªÙØ¹ÙŠÙ„: <strong>ÙØªØ­ÙŠ</strong></p>
      <p id="actError" style="color:#c00;margin-top:8px;display:none"></p>
    </div>
  </div>

  <script>
    // -----------------------------
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â€” ØºÙŠÙ‘Ø± Ø¥Ø°Ø§ Ù„Ø²Ù…
    // -----------------------------
    const API = "https://zkr-495g.onrender.com/tasks"; // Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
    const ACTIVATION_CODE = "ran-/u87"; // ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„

    // -----------------------------
    // Activation logic
    // -----------------------------
    const overlay = document.getElementById('activationOverlay');
    const activationBtn = document.getElementById('activationBtn');
    const activationInput = document.getElementById('activationInput');
    const actError = document.getElementById('actError');

    function checkActivation(){
      // sessionStorage ÙŠÙ…Ù†Ø¹ Ø·Ù„Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ© ÙÙŠ Ù†ÙØ³ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
      if(sessionStorage.getItem('rem_activated') === ACTIVATION_CODE){
        overlay.style.display = 'none';
        return true;
      }
      overlay.style.display = 'flex';
      activationInput.focus();
      return false;
    }

    activationBtn.addEventListener('click', () => {
      const v = activationInput.value.trim();
      if(v === ACTIVATION_CODE){
        sessionStorage.setItem('rem_activated', ACTIVATION_CODE);
        overlay.style.display = 'none';
      } else {
        actError.style.display = 'block';
        actError.textContent = "Ø±Ù…Ø² Ø®Ø§Ø·Ø¦ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
      }
    });

    // Allow Enter key
    activationInput.addEventListener('keydown', (e) => {
      if(e.key === 'Enter') activationBtn.click();
    });

    // run on load
    checkActivation();

    // -----------------------------
    // Sending tasks
    // -----------------------------
    const sendBtn = document.getElementById('sendBtn');
    const statusEl = document.getElementById('status');

    sendBtn.addEventListener('click', async () => {
      // must be activated
      const subject = document.getElementById('subject').value.trim();
const task = document.getElementById('task').value.trim();
const date = document.getElementById('date').value || "";

// ğŸ”¥ Ø¥Ù†Ø´Ø§Ø¡ ID ÙØ±ÙŠØ¯
const id = "task-" + crypto.randomUUID();

statusEl.style.color = "#fff";
statusEl.textContent = "â³ Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

try {
  const res = await fetch(API, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      id,
      subject,
      task,
      date
    })
  });

      }

      const subject = document.getElementById('subject').value.trim();
      const task = document.getElementById('task').value.trim();
      const date = document.getElementById('date').value || "";

      if(!subject || !task){
        statusEl.style.color = "#c00";
        statusEl.textContent = "âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ù„Ù…Ø§Ø¯Ø© ÙˆØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©.";
        return;
      }

      statusEl.style.color = "#fff";
      statusEl.textContent = "â³ Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

      try {
        const res = await fetch(API, {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          // Ø¥Ù†Ø´Ø§Ø¡ ID ÙØ±ÙŠØ¯ Ù„Ù„Ù…Ù‡Ù…Ø©
        const id = "task-" + crypto.randomUUID();

       // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© Ù…Ø¹ Ø§Ù„Ù€ ID
        body: JSON.stringify({ id, subject, task, date })

        });

        if(res.ok){
          statusEl.style.color = "#fff";
          statusEl.textContent = "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!";
          document.getElementById('subject').value = "";
          document.getElementById('task').value = "";
          document.getElementById('date').value = "";
        } else {
          statusEl.style.color = "#fff";
          statusEl.textContent = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù….";
          console.error('Server returned', res.status);
        }
      } catch (err){
        statusEl.style.color = "#fff";
        statusEl.textContent = "ğŸš« Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….";
        console.error(err);
      }

      // Ø§Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 4 Ø«ÙˆØ§Ù†ÙŠ
      setTimeout(()=> { statusEl.textContent = ""; }, 4000);
    });
  </script>
</body>
</html>

